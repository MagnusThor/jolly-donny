<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>jolly-donny</title><meta name="description" content="Documentation for jolly-donny"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">jolly-donny</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>jolly-donny</h1></div><div class="tsd-panel tsd-typography"><a id="offline-storage-library" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Offline Storage Library<a href="#offline-storage-library" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A TypeScript library for powerful offline data management. Supports pluggable storage providers (LocalStorage, IndexedDB, SQLite via WASM), LINQ-style query API, async CRUD operations, change tracking, and enhanced QueryableArray utilities.</p>
<p>✨ Features</p>
<ul>
<li>
<p>Generic Collections – Create type-safe collections for structured
data management.</p>
</li>
<li>
<p>CRUD Operations – Perform standard Create, Read, Update, and Delete actions with ease.</p>
</li>
<li>
<p>Flexible Querying – Use intuitive query functions to filter and
transform data.</p>
</li>
<li>
<p>Asynchronous Execution – All operations are async to keep your app
responsive and non-blocking.</p>
</li>
<li>
<p>Pluggable Storage Providers – Works with various backends:
LocalStorage, IndexedDB, File System API, and SQLite (WASM).</p>
</li>
<li>
<p>Data Synchronization – Easily sync local data with remote APIs using
built-in helpers.</p>
<ul>
<li>Transformable Fetch – Fetch method supports optional transformation logic or returns raw JSON.</li>
</ul>
</li>
<li>
<p>Timeout &amp; Cancellation Support – Use AbortController to handle
request timeouts and cancellations.</p>
</li>
<li>
<p>Built with TypeScript – Enjoy full type safety and enhanced developer  tooling.</p>
<p>Easily Extensible – Add your own custom storage providers or
extend existing features effortlessly.</p>
</li>
</ul>
<a id="installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><br/><span class="hl-0">npm</span><span class="hl-1">  </span><span class="hl-2">i</span><span class="hl-1">  </span><span class="hl-2">jolly-donny</span><br/>
</code><button type="button">Copy</button></pre>

<a id="usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>Initialize OfflineStorage</li>
</ol>
<pre><code class="typescript"><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">OfflineStorage</span><span class="hl-1">, </span><span class="hl-4">IndexedDBProvider</span><span class="hl-1">,</span><span class="hl-4">LocalStorageProvider</span><span class="hl-1">, </span><span class="hl-4">PersistedEntity</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1">  </span><span class="hl-2">&#39;your-package-name&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">class</span><span class="hl-1">  </span><span class="hl-6">User</span><span class="hl-1">  </span><span class="hl-5">extends</span><span class="hl-1">  </span><span class="hl-6">PersistedEntity</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-5">constructor</span><span class="hl-1">(</span><span class="hl-5">public</span><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-5">public</span><span class="hl-1">  </span><span class="hl-4">age</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">) {</span><br/><br/><span class="hl-5">super</span><span class="hl-1">();</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">provider</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">IndexedDBProvider</span><span class="hl-1">();</span><br/><br/><span class="hl-8">// const provider = new LocalStorageProvider();</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">storage</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">OfflineStorage</span><span class="hl-1">(</span><span class="hl-4">provider</span><span class="hl-1">, </span><span class="hl-2">&#39;userStorage&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">initStorage</span><span class="hl-1">() {</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Storage initialized&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">initStorage</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="2">
<li>Add and Retrieve Data</li>
</ol>
<pre><code class="typescript"><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">addAndRetrieveUsers</span><span class="hl-1">() {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">users</span><span class="hl-1"> = </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">newUser</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">User</span><span class="hl-1">(</span><span class="hl-2">&#39;John Doe&#39;</span><span class="hl-1">, </span><span class="hl-9">25</span><span class="hl-1">);</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">insert</span><span class="hl-1">(</span><span class="hl-4">newUser</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">allUsers</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;All users:&#39;</span><span class="hl-1">, </span><span class="hl-4">allUsers</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">filteredUsers</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">  </span><span class="hl-5">=&gt;</span><span class="hl-1">  </span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">age</span><span class="hl-1"> &gt; </span><span class="hl-9">25</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Filtered users:&#39;</span><span class="hl-1">, </span><span class="hl-4">filteredUsers</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">firstUser</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">first</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;First user:&#39;</span><span class="hl-1">, </span><span class="hl-4">firstUser</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">addAndRetrieveUsers</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="3">
<li>Update and Delete Data</li>
</ol>
<pre><code class="typescript"><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">updateAndDeleteUsers</span><span class="hl-1">() {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">users</span><span class="hl-1"> = </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">firstUser</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">first</span><span class="hl-1">();</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">firstUser</span><span class="hl-1">) {</span><br/><br/><span class="hl-4">firstUser</span><span class="hl-1">.</span><span class="hl-4">age</span><span class="hl-1"> = </span><span class="hl-9">35</span><span class="hl-1">;</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">(</span><span class="hl-4">firstUser</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;User updated:&#39;</span><span class="hl-1">, </span><span class="hl-4">firstUser</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-4">firstUser</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;User deleted:&#39;</span><span class="hl-1">, </span><span class="hl-4">firstUser</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">updateAndDeleteUsers</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="4">
<li>Using QueryableArray</li>
</ol>
<pre><code class="typescript"><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">useQueryableArray</span><span class="hl-1">() {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">users</span><span class="hl-1"> = </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">usersArray</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">filteredUsers</span><span class="hl-1"> = </span><span class="hl-4">usersArray</span><br/><br/><span class="hl-1">.</span><span class="hl-0">where</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">  </span><span class="hl-5">=&gt;</span><span class="hl-1">  </span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">age</span><span class="hl-1"> &gt; </span><span class="hl-9">20</span><span class="hl-1">)</span><br/><br/><span class="hl-1">.</span><span class="hl-0">orderBy</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">  </span><span class="hl-5">=&gt;</span><span class="hl-1">  </span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1">)</span><br/><br/><span class="hl-1">.</span><span class="hl-0">take</span><span class="hl-1">(</span><span class="hl-9">5</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Filtered and ordered users:&#39;</span><span class="hl-1">, </span><span class="hl-4">filteredUsers</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">useQueryableArray</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="5">
<li>Change Tracking</li>
</ol>
<pre><code class="typescript"><br/><span class="hl-1">  </span><br/><br/><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">onChange</span><span class="hl-1"> = (</span><span class="hl-4">change</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Data changed:&#39;</span><span class="hl-1">, </span><span class="hl-4">change</span><span class="hl-1">);</span><br/><br/><span class="hl-1">};</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">insertUserWithChangeTracking</span><span class="hl-1">() {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">users</span><span class="hl-1"> = </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">newUser</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">User</span><span class="hl-1">(</span><span class="hl-2">&#39;Jane Smith&#39;</span><span class="hl-1">, </span><span class="hl-9">25</span><span class="hl-1">);</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">insert</span><span class="hl-1">(</span><span class="hl-4">newUser</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">insertUserWithChangeTracking</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="6">
<li>Using the fetch Helper for Data Synchronization</li>
</ol>
<pre><code class="typescript"><br/><span class="hl-5">interface</span><span class="hl-1">  </span><span class="hl-6">IMenu</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">dishes</span><span class="hl-1">: </span><span class="hl-6">IDish</span><span class="hl-1">[];</span><br/><br/><span class="hl-4">categories</span><span class="hl-1">: </span><span class="hl-6">ICategory</span><span class="hl-1">[];</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">interface</span><span class="hl-1">  </span><span class="hl-6">IDish</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">category</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">priceString</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">sku</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">description</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">uuid</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">showInLimited</span><span class="hl-1">: </span><span class="hl-6">boolean</span><span class="hl-1">;</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">interface</span><span class="hl-1">  </span><span class="hl-6">ICategory</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">class</span><span class="hl-1">  </span><span class="hl-6">ExtendedDish</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">category</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">priceString</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">sku</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">description</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">uuid</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">showInLimited</span><span class="hl-1">: </span><span class="hl-6">boolean</span><span class="hl-1">;</span><br/><br/><span class="hl-4">categoryName</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">get</span><span class="hl-1">  </span><span class="hl-0">price</span><span class="hl-1">(): </span><span class="hl-6">number</span><span class="hl-1"> {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">parsedPrice</span><span class="hl-1"> = </span><span class="hl-0">parseFloat</span><span class="hl-1">(</span><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">priceString</span><span class="hl-1">);</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-0">isNaN</span><span class="hl-1">(</span><span class="hl-4">parsedPrice</span><span class="hl-1">) ? </span><span class="hl-9">0</span><span class="hl-1"> : </span><span class="hl-4">parsedPrice</span><span class="hl-1">;</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">set</span><span class="hl-1">  </span><span class="hl-0">price</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">) {</span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">priceString</span><span class="hl-1"> = </span><span class="hl-4">value</span><span class="hl-1">.</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-9">2</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">syncAndStoreDishes</span><span class="hl-1">() {</span><br/><br/><span class="hl-3">try</span><span class="hl-1"> {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">extendedDishes</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">OfflineStorage</span><span class="hl-1">.</span><span class="hl-0">fetch</span><span class="hl-1">&lt;</span><span class="hl-6">IMenu</span><span class="hl-1">, </span><span class="hl-6">ExtendedDish</span><span class="hl-1">[]&gt;(</span><span class="hl-2">&#39;fake-api/data.json&#39;</span><span class="hl-1">, (</span><span class="hl-4">result</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">dishes</span><span class="hl-1"> = </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">dishes</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">dish</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">category</span><span class="hl-1"> = </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">categories</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">((</span><span class="hl-4">cat</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1">  </span><span class="hl-4">cat</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> === </span><span class="hl-4">dish</span><span class="hl-1">.</span><span class="hl-4">category</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">extendedDish</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">ExtendedDish</span><span class="hl-1">();</span><br/><br/><span class="hl-4">Object</span><span class="hl-1">.</span><span class="hl-0">assign</span><span class="hl-1">(</span><span class="hl-4">extendedDish</span><span class="hl-1">, </span><span class="hl-4">dish</span><span class="hl-1">);</span><br/><br/><span class="hl-4">extendedDish</span><span class="hl-1">.</span><span class="hl-4">categoryName</span><span class="hl-1"> = </span><span class="hl-4">category</span><span class="hl-1"> ? </span><span class="hl-4">category</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1"> : </span><span class="hl-2">&#39;Unknown&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">extendedDish</span><span class="hl-1">;</span><br/><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">dishes</span><span class="hl-1">;</span><br/><br/><span class="hl-1">});</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">dish</span><span class="hl-1">  </span><span class="hl-5">of</span><span class="hl-1">  </span><span class="hl-4">extendedDishes</span><span class="hl-1">) {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">existingDish</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">ExtendedDish</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;dishStorage&#39;</span><span class="hl-1">).</span><span class="hl-0">find</span><span class="hl-1">((</span><span class="hl-4">d</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1">  </span><span class="hl-4">d</span><span class="hl-1">.</span><span class="hl-4">uuid</span><span class="hl-1"> === </span><span class="hl-4">dish</span><span class="hl-1">.</span><span class="hl-4">uuid</span><span class="hl-1">);</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">existingDish</span><span class="hl-1"> || </span><span class="hl-4">existingDish</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">ExtendedDish</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;dishStorage&#39;</span><span class="hl-1">).</span><span class="hl-0">insert</span><span class="hl-1">(</span><span class="hl-4">dish</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">storedDishes</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">ExtendedDish</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;dishStorage&#39;</span><span class="hl-1">).</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Stored dishes:&#39;</span><span class="hl-1">, </span><span class="hl-4">storedDishes</span><span class="hl-1">);</span><br/><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Synchronization failed:&#39;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">syncAndStoreDishes</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="7">
<li><strong>Using Formatters with PersistedEntityBuilder</strong></li>
</ol>
<pre><code class="typescript"><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">PersistedEntity</span><span class="hl-1">, </span><span class="hl-4">PersistedEntityBuilder</span><span class="hl-1">, </span><span class="hl-4">IFormatter</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1">  </span><span class="hl-2">&#39;your-package-name&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">class</span><span class="hl-1">  </span><span class="hl-6">CustomStringFormater</span><span class="hl-1">  </span><span class="hl-5">implements</span><span class="hl-1">  </span><span class="hl-6">IFormatter</span><span class="hl-1">&lt;</span><span class="hl-6">string</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-0">format</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">): </span><span class="hl-6">string</span><span class="hl-1"> {</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">value</span><span class="hl-1">.</span><span class="hl-0">toLowerCase</span><span class="hl-1">(); </span><span class="hl-8">// always store the value in lower case</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">): </span><span class="hl-6">string</span><span class="hl-1"> {</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">value</span><span class="hl-1">.</span><span class="hl-0">toUpperCase</span><span class="hl-1">(); </span><span class="hl-8">// always return the value in upper case</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">class</span><span class="hl-1">  </span><span class="hl-6">CustomDateFormater</span><span class="hl-1">  </span><span class="hl-5">implements</span><span class="hl-1">  </span><span class="hl-6">IFormatter</span><span class="hl-1">&lt;</span><span class="hl-6">Date</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-0">format</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-6">Date</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1">): </span><span class="hl-6">Date</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1"> {</span><br/><br/><span class="hl-8">// Store the Date object as is</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">value</span><span class="hl-1">;</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-6">Date</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1">): </span><span class="hl-6">Date</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1"> {</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">value</span><span class="hl-1">) {</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">value</span><span class="hl-1">.</span><span class="hl-0">setHours</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">, </span><span class="hl-9">0</span><span class="hl-1">, </span><span class="hl-9">0</span><span class="hl-1">, </span><span class="hl-9">0</span><span class="hl-1">); </span><span class="hl-8">// set the time to 00:00:00.000</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">value</span><span class="hl-1">;</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">class</span><span class="hl-1">  </span><span class="hl-6">User</span><span class="hl-1">  </span><span class="hl-5">extends</span><span class="hl-1">  </span><span class="hl-6">PersistedEntity</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">created</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">lastModified</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-4">age</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><br/><span class="hl-4">birthDate</span><span class="hl-1">: </span><span class="hl-6">Date</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1"> = </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">constructor</span><span class="hl-1">(</span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-4">age</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">) {</span><br/><br/><span class="hl-5">super</span><span class="hl-1">(</span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">PersistedEntityBuilder</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt;()</span><br/><br/><span class="hl-1">.</span><span class="hl-0">addFormatter</span><span class="hl-1">(</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">CustomStringFormater</span><span class="hl-1">())</span><br/><br/><span class="hl-1">.</span><span class="hl-0">addFormatter</span><span class="hl-1">(</span><span class="hl-2">&#39;birthDate&#39;</span><span class="hl-1">, </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">CustomDateFormater</span><span class="hl-1">())</span><br/><br/><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> = </span><span class="hl-4">crypto</span><span class="hl-1">.</span><span class="hl-0">randomUUID</span><span class="hl-1">();</span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">created</span><span class="hl-1"> = </span><span class="hl-4">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">();</span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">lastModified</span><span class="hl-1"> = </span><span class="hl-4">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">();</span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1"> = </span><span class="hl-4">name</span><span class="hl-1">;</span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">age</span><span class="hl-1"> = </span><span class="hl-4">age</span><span class="hl-1">;</span><br/><br/><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">birthDate</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">Date</span><span class="hl-1">();</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Example usage:</span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">exampleFormatters</span><span class="hl-1">() {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">users</span><span class="hl-1"> = </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">&lt;</span><span class="hl-6">User</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">newUser</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">User</span><span class="hl-1">(</span><span class="hl-2">&#39;Example User&#39;</span><span class="hl-1">, </span><span class="hl-9">30</span><span class="hl-1">);</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">insert</span><span class="hl-1">(</span><span class="hl-4">newUser</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">allUsers</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">users</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Users with formatters:&#39;</span><span class="hl-1">, </span><span class="hl-4">allUsers</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-0">exampleFormatters</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

<ol start="8">
<li>Using the FileSystemProvider for File-Based Storage</li>
</ol>
<p>The FileSystemProvider enables storing and loading collections using the File System Access API (in supported browsers).</p>
<pre><code class="typescript"><br/><span class="hl-3">import</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">FileSystemProvider</span><span class="hl-1">,</span><br/><br/><span class="hl-4">OfflineStorage</span><span class="hl-1">,</span><br/><br/><span class="hl-4">IProviderConfig</span><span class="hl-1">,</span><br/><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1">  </span><span class="hl-2">&#39;jolly-donny&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">IMenu</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1">  </span><span class="hl-2">&#39;./types&#39;</span><span class="hl-1">; </span><span class="hl-8">// Your data interfaces</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Optional: define a parser to extract collections from a loaded file</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-0">dishFileParser</span><span class="hl-1"> = (</span><span class="hl-4">content</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">): </span><span class="hl-6">Map</span><span class="hl-1">&lt;</span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">any</span><span class="hl-1">&gt; </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">parsed</span><span class="hl-1">: </span><span class="hl-6">IMenu</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">collections</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">Map</span><span class="hl-1">&lt;</span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">any</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">Array</span><span class="hl-1">.</span><span class="hl-0">isArray</span><span class="hl-1">(</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">dishes</span><span class="hl-1">)) </span><span class="hl-4">collections</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-2">&#39;dishes&#39;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">dishes</span><span class="hl-1">);</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">Array</span><span class="hl-1">.</span><span class="hl-0">isArray</span><span class="hl-1">(</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">categories</span><span class="hl-1">)) </span><span class="hl-4">collections</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-2">&#39;categories&#39;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">categories</span><span class="hl-1">);</span><br/><br/><span class="hl-3">return</span><span class="hl-1">  </span><span class="hl-4">collections</span><span class="hl-1">;</span><br/><br/><span class="hl-1">};</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">async</span><span class="hl-1">  </span><span class="hl-5">function</span><span class="hl-1">  </span><span class="hl-0">useFileSystemProvider</span><span class="hl-1">() {</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">providerConfig</span><span class="hl-1">: </span><span class="hl-6">IProviderConfig</span><span class="hl-1"> = {</span><br/><br/><span class="hl-4">parser:</span><span class="hl-1">  </span><span class="hl-4">dishFileParser</span><span class="hl-1">,</span><br/><br/><span class="hl-1">};</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">provider</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">FileSystemProvider</span><span class="hl-1">(</span><span class="hl-4">providerConfig</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">storage</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">OfflineStorage</span><span class="hl-1">(</span><span class="hl-4">provider</span><span class="hl-1">, </span><span class="hl-2">&#39;menu&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">dishes</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">getCollection</span><span class="hl-1">(</span><span class="hl-2">&#39;dishes&#39;</span><span class="hl-1">).</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Loaded dishes from file:&#39;</span><span class="hl-1">, </span><span class="hl-4">dishes</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Modify and save</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">dishes</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> &gt; </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><br/><span class="hl-4">dishes</span><span class="hl-1">[</span><span class="hl-9">0</span><span class="hl-1">].</span><span class="hl-4">price</span><span class="hl-1"> = </span><span class="hl-9">99</span><span class="hl-1">;</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">(</span><span class="hl-2">&#39;dishes&#39;</span><span class="hl-1">, </span><span class="hl-4">dishes</span><span class="hl-1">[</span><span class="hl-9">0</span><span class="hl-1">]);</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">storage</span><span class="hl-1">.</span><span class="hl-0">save</span><span class="hl-1">(); </span><span class="hl-8">// Save back to file</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">}</span><br/>
</code><button type="button">Copy</button></pre>

<p>Note: The File System API is available in Chromium-based browsers like Chrome and Edge. When init() is called, the user will be prompted to select a file.</p>
<ol start="9">
<li>Using the SQLiteSchemeProvider</li>
</ol>
<p>This example demonstrates how to use the SQLiteSchemeProvider for storing and retrieving data in an SQLite database.</p>
<pre><code class="typescript"><br/><span class="hl-1">  </span><br/><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">SQLiteSchemeProvider</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1">  </span><span class="hl-2">&#39;jolly-donny&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Create a new instance of the SQLiteProvider</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">provider</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1">  </span><span class="hl-0">SQLiteSchemeProvider</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Initialize the provider with a storage name</span><br/><br/><span class="hl-4">provider</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-2">&#39;notes-db&#39;</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;SQLiteProvider initialized&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Create a new note object</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">newNote</span><span class="hl-1"> = { </span><span class="hl-4">title:</span><span class="hl-1">  </span><span class="hl-2">&#39;First Note&#39;</span><span class="hl-1">, </span><span class="hl-4">content:</span><span class="hl-1">  </span><span class="hl-2">&#39;This is the content of the first note.&#39;</span><span class="hl-1"> };</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Insert the note into the database</span><br/><br/><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">provider</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">(</span><span class="hl-2">&#39;notes&#39;</span><span class="hl-1">, </span><span class="hl-4">newNote</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><br/><br/><span class="hl-8">// Retrieve all notes from the database</span><br/><br/><span class="hl-5">const</span><span class="hl-1">  </span><span class="hl-7">allNotes</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1">  </span><span class="hl-4">provider</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><span class="hl-2">&#39;notes&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;All notes:&#39;</span><span class="hl-1">, </span><span class="hl-4">allNotes</span><span class="hl-1">);</span><br/><br/><span class="hl-1">}).</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-4">error</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Error initializing SQLite provider:&#39;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><br/><span class="hl-1">});</span><br/><br/><span class="hl-1">  </span><br/>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#offline-storage-library"><span>Offline <wbr/>Storage <wbr/>Library</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#usage"><span>Usage</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">jolly-donny</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
